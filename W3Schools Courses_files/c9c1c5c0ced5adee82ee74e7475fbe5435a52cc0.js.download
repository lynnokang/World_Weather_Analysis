// < w3s alter enrollment user session flow
CUSTOM_ENV = {
   "enrollment.is_present": false,
   "enrollment.user_is_anonymous": false
}

if (
   typeof ENV.isEnrollmentForm !== "undefined"
   && ENV.isEnrollmentForm === true // is enrollment page
) {
   CUSTOM_ENV["enrollment.is_present"] = true;
}

if (
   CUSTOM_ENV["enrollment.is_present"]
   && typeof ENV.user !== "undefined"
   && typeof ENV.user.id === "undefined" // and no user session is present
   && typeof ENV.rootAccount !== "undefined"
   && typeof ENV.rootAccount.loginUrl !== "undefined" // and a log-in url is present
) {
   CUSTOM_ENV["enrollment.user_is_anonymous"] = true;
}

// CUSTOM_ENV._version = Cookies.get("w3s_catalog.version")

// // fallback to v1
// if (typeof CUSTOM_ENV._version === "undefined" || !CUSTOM_ENV._version) {
//    CUSTOM_ENV._version = "1";
// }

// if (CUSTOM_ENV["enrollment.is_present"] && CUSTOM_ENV._version === "2") {
if (CUSTOM_ENV["enrollment.is_present"]) {
   var elm_enrollment_form = document.getElementById("registration");

   elm_enrollment_form.className += " w3s-overrides";

   if (CUSTOM_ENV["enrollment.user_is_anonymous"]) {
      elm_enrollment_form.className += " w3s-anonymous-user";
   }

   var elm_ef_submit_btn_wrp = document.getElementsByClassName("RegistrationFooter__SubmitButton")[0],
      elm_ef_captcha_wrp = elm_ef_submit_btn_wrp.previousElementSibling;

   elm_ef_captcha_wrp.className += " w3s-captcha-wrp";

   if (CUSTOM_ENV["enrollment.user_is_anonymous"]) {
      var getAltUserSessionAuthButtons = function (log_in_url) {
         return '<div class="w3s-btn-owrp"><div class="w3s-btn-iwrp"><a href="' + log_in_url + '" class="btn-info btn-lg w3s-log-in-btn">Continue</a></div></div>';
      };

      elm_ef_submit_btn_wrp.innerHTML = '<div class="w3s-auth-info-text">Click "Continue" to sign up or log in before you purchase this course.</div>' +
         getAltUserSessionAuthButtons(ENV.rootAccount.loginUrl);
   } else {
      // wrp > div > button > span
      elm_ef_submit_btn_wrp.childNodes[0].childNodes[0].childNodes[0].innerHTML = 'Proceed to payment';
   }
}
// > w3s alter enrollment user session flow


// < w3s refinements
$("#search-refine-button--refine").addClass('hidden');

$('#user-nav').prepend("<span style='color:#04AA6D'><a  href='https://www.w3schools.com' title='Back to main site' target='_blank' style='padding-right:0px; color:#04AA6D;'>  Back to main site </a>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;</span>    ");
// > w3s refinements


// < w3s gtag
var current_scripts = document.getElementsByTagName('script')[0],
   w3s_gtag_script = document.createElement('script');

w3s_gtag_script.src = 'https://www.googletagmanager.com/gtag/js?id=UA-3855518-1';
current_scripts.parentNode.insertBefore(w3s_gtag_script, current_scripts);

window.dataLayer = window.dataLayer || [];

function w3sGTag() {
   window.dataLayer.push(arguments);
}

w3sGTag('js', new Date());
w3sGTag('config', 'UA-3855518-1');
// > w3s gtag